<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Netflix</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#000000">

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{
  margin:0;
  background:#000;
  color:#fff;
}

/* -------- LOGIN -------- */
#login{
  height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
}
#login h1{color:#e50914}
#login input{
  padding:12px;
  width:220px;
  border-radius:4px;
  border:none;
  margin-bottom:10px;
}
#login button{
  padding:12px;
  width:220px;
  background:#e50914;
  border:none;
  color:#fff;
  font-size:16px;
  border-radius:4px;
}

/* -------- PERFIS -------- */
#profiles{display:none;padding:40px 20px;text-align:center}
.profiles-grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:20px;
  margin-top:30px;
}
.profile{
  cursor:pointer;
}
.avatar{
  width:100px;
  height:100px;
  border-radius:12px;
  background:#333;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:36px;
}
.profile p{margin-top:10px}

/* -------- HOME -------- */
#home{display:none}
header{
  padding:15px;
  font-size:22px;
  color:#e50914;
}

/* GRID NETFLIX */
.grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  padding:10px;
}
.card img{
  width:100%;
  border-radius:6px;
}

/* PLAYER */
video, iframe{
  width:100%;
  margin-top:15px;
  border-radius:6px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login">
  <h1>Netflix</h1>
  <input type="password" id="password" placeholder="Senha">
  <button onclick="login()">Entrar</button>
</div>

<!-- PERFIS -->
<div id="profiles">
  <h2>Quem estÃ¡ assistindo?</h2>
  <div class="profiles-grid">
    <div class="profile" onclick="selectProfile('real')">
      <div class="avatar">ðŸ‡®ðŸ‡¹</div>
      <p>VocÃª</p>
    </div>
    <div class="profile" onclick="selectProfile('fake')">
      <div class="avatar">ðŸŽ¬</div>
      <p>Visitante</p>
    </div>
  </div>
</div>

<!-- HOME -->
<div id="home">
<header>Netflix</header>

<!-- REAL -->
<div id="realMode">
  <h3 style="padding-left:10px">Meus vÃ­deos</h3>
  <input type="file" accept="video/*" multiple onchange="addVideos(event)" style="padding:10px">
  <div class="grid" id="myVideos"></div>
</div>

<!-- FAKE -->
<div id="fakeMode">
  <h3 style="padding-left:10px">Recomendados</h3>
  <div class="grid">
    <div class="card" onclick="playTrailer('https://www.youtube.com/embed/YoHD9XEInc0')">
      <img src="https://image.tmdb.org/t/p/w500/9E2y5Q7WlCVNEhP5GiVTjhEhx1o.jpg">
    </div>
    <div class="card" onclick="playTrailer('https://www.youtube.com/embed/lJ3_biTbeRM')">
      <img src="https://image.tmdb.org/t/p/w500/7WsyChQLEftFiDOVTGkv3hFpyyt.jpg">
    </div>
  </div>
  <iframe id="trailer" height="220" allowfullscreen></iframe>
</div>

</div>

<script>
/* ====== SENHAS ====== */
const REAL_PASSWORD = "1234";
const FAKE_PASSWORD = "0000";

let currentMode = "";

/* ====== ELEMENTOS ====== */
const loginDiv = document.getElementById("login");
const profilesDiv = document.getElementById("profiles");
const homeDiv = document.getElementById("home");
const realModeDiv = document.getElementById("realMode");
const fakeModeDiv = document.getElementById("fakeMode");
const videoGrid = document.getElementById("myVideos");

/* ====== LOGIN ====== */
function login(){
  const pass = document.getElementById("password").value;

  if(pass === REAL_PASSWORD){
    currentMode = "real";
  } else if(pass === FAKE_PASSWORD){
    currentMode = "fake";
  } else {
    alert("Senha incorreta");
    return;
  }

  loginDiv.style.display = "none";
  profilesDiv.style.display = "block";
}

/* ====== PERFIL ====== */
function selectProfile(type){
  if(type !== currentMode){
    alert("Perfil nÃ£o autorizado");
    return;
  }

  profilesDiv.style.display = "none";
  homeDiv.style.display = "block";

  if(currentMode === "real"){
    realModeDiv.style.display = "block";
    fakeModeDiv.style.display = "none";
    loadSavedVideos();
  } else {
    realModeDiv.style.display = "none";
    fakeModeDiv.style.display = "block";
  }
}

/* ====== INDEXED DB ====== */
let db;
const request = indexedDB.open("NetflixVideosDB", 1);

request.onupgradeneeded = e => {
  db = e.target.result;
  db.createObjectStore("videos", { autoIncrement: true });
};

request.onsuccess = e => {
  db = e.target.result;
};

function saveVideo(blob){
  const tx = db.transaction("videos", "readwrite");
  tx.objectStore("videos").add(blob);
}

function loadSavedVideos(){
  videoGrid.innerHTML = "";
  const tx = db.transaction("videos", "readonly");
  const store = tx.objectStore("videos");

  store.openCursor().onsuccess = e => {
    const cursor = e.target.result;
    if(cursor){
      const url = URL.createObjectURL(cursor.value);
      createVideo(url);
      cursor.continue();
    }
  };
}

/* ====== REAL MODE ====== */
function addVideos(e){
  if(currentMode !== "real"){
    alert("Acesso negado");
    return;
  }

  [...e.target.files].forEach(file=>{
    saveVideo(file);
    const url = URL.createObjectURL(file);
    createVideo(url);
  });
}

function createVideo(url){
  const video = document.createElement("video");
  video.src = url;
  video.controls = true;
  video.style.width = "100%";
  videoGrid.appendChild(video);
}

/* ====== FAKE MODE ====== */
function playTrailer(url){
  if(currentMode !== "fake") return;
  document.getElementById("trailer").src = url;
}
  </script>

</body>
</html>
